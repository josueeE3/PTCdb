Create table Rol(
Id_rol NUMBER GENERATED BY DEFAULT AS IDENTITY primary key,
Nombre VARCHAR2(20) NOT NULL
);


Create table Usuario(
Id_usuario NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
Id_rol NUMBER,
Nombre VARCHAR2(50) NOT NULL,
Contraseña VARCHAR2(8) NOT NULL,

CONSTRAINT fk_rol FOREIGN KEY (Id_rol) REFERENCES Rol(Id_rol)
);

Create table EstadoOrdenServicio(
Id_estado NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
Nombre VARCHAR2(20) NOT NULL
);

Create table Cliente (
Dui_cliente VARCHAR2(10) PRIMARY KEY,
Nombres VARCHAR2(50) NOT NULL,
Apellidos VARCHAR2(50) NOT NULL,
Correo_Electronico VARCHAR2(50) NOT NULL,
Telefono VARCHAR2(8) NOT NULL
);

Create table Marca(
Id_marca NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
Nombre VARCHAR2(50) NOT NULL,
Descripcion VARCHAR2(200)
);

Create table Proveedor(
Dui_proveedor VARCHAR2(10) PRIMARY KEY,
Nombres VARCHAR2(50) NOT NULL,
Apellidos VARCHAR2(50) NOT NULL,
Telefono VARCHAR2(9) NOT NULL,
Correo_Electronico VARCHAR2(50) NOT NULL,
Direccion VARCHAR2(200) NOT NULL
);

Create table Servicio(
Id_servicio NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
Nombre VARCHAR2(50) NOT NULL,
Descripcion VARCHAR2(50) NOT NULL,
Precio NUMBER(10, 2) NOT NULL
);

Create table Producto(
Id_producto NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
Dui_proveedor VARCHAR2(10),
Nombre VARCHAR2(50) NOT NULL,
CantidadDisponible NUMBER NOT NULL,
Precio NUMBER(10, 2) NOT NULL,

CONSTRAINT fk_proveedor FOREIGN KEY (Dui_proveedor) REFERENCES Proveedor(Dui_proveedor)
);


Create table Modelo(
Id_modelo NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
Id_marca NUMBER,
Nombre VARCHAR2(20) NOT NULL,

CONSTRAINT fk_marca FOREIGN KEY (Id_marca) REFERENCES Marca(Id_marca)
);


Create table Empleado(
Dui_empleado VARCHAR2(10) PRIMARY KEY,
Id_usuario NUMBER,
Nombres VARCHAR2(100) NOT NULL,
Apellidos VARCHAR2(100) NOT NULL,
FechaNacimiento DATE NOT NULL,
CorreoElectronico VARCHAR2(50) NOT NULL,
Telefono VARCHAR2(9) NOT NULL,
EstadoCivil VARCHAR2(20) NOT NULL,
NivelAcademico VARCHAR2(20) NOT NULL,

CONSTRAINT fk_usuario FOREIGN KEY (Id_usuario) REFERENCES Usuario(Id_usuario)
);


Create table Carro(
Placa_carro VARCHAR2(8) PRIMARY KEY,
Dui_cliente VARCHAR2(10),
Id_modelo NUMBER,
Color VARCHAR2(15) NOT NULL,
Año DATE NOT NULL,
FechaRegistro DATE NOT NULL,
Descripcion VARCHAR2(200) NOT NULL,

CONSTRAINT fk_cliente FOREIGN KEY (Dui_cliente) REFERENCES Cliente(Dui_cliente),
CONSTRAINT fk_modelo FOREIGN KEY (Id_modelo) REFERENCES Modelo(Id_modelo)
);

Create table HistorialCarro(
Id_historialCarro NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
Placa_carro VARCHAR2(8),
FechaServicio DATE NOT NULL,
Descripcion VARCHAR2(150) NOT NULL,

CONSTRAINT fk_carro FOREIGN KEY (Placa_carro) REFERENCES Carro(Placa_carro)
);


Create table OrdenServicio(
Id_ordenServicio NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
Placa_carro VARCHAR2(8),
Dui_empleado VARCHAR2(10),
Id_estado NUMBER,
FechaAsignacion DATE,
FechaFinalizacion DATE,
Descripcion VARCHAR2(150) NOT NULL,

CONSTRAINT fk_carro1 FOREIGN KEY (Placa_carro) REFERENCES Carro(Placa_carro),
CONSTRAINT fk_empleado FOREIGN KEY (Dui_empleado) REFERENCES Empleado(Dui_empleado),
CONSTRAINT fk_estado FOREIGN KEY (Id_estado) REFERENCES EstadoOrdenServicio(Id_estado)
);


Create table Cita (
Id_cita NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
Fecha TIMESTAMP,
Descripcion VARCHAR2(250) NOT NULL
);


Create table DetalleCita(
Id_DetalleCita NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
Id_cita NUMBER,
Dui_cliente VARCHAR2(10),
Dui_empleado VARCHAR2(10),
Descripcion VARCHAR2(250) NOT NULL,

CONSTRAINT fk_cita1 FOREIGN KEY (Id_cita) REFERENCES Cita(Id_cita),
CONSTRAINT fk_cliente1 FOREIGN KEY (Dui_cliente) REFERENCES Cliente(Dui_cliente),
CONSTRAINT fk_empleado1 FOREIGN KEY (Dui_empleado) REFERENCES Empleado(Dui_empleado)
);


Create table Factura(
Id_factura NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
Dui_cliente VARCHAR2(10),
Dui_empleado VARCHAR2(10),
FechaEmision TIMESTAMP NOT NULL,
FechaVencimiento TIMESTAMP NOT NULL,

CONSTRAINT fk_cliente2 FOREIGN KEY (Dui_cliente) REFERENCES Cliente(Dui_cliente),
CONSTRAINT fk_empleado2 FOREIGN KEY (Dui_empleado) REFERENCES Empleado(Dui_empleado)
);

Create table DetalleServicio(
Id_DetalleServicio NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
Id_factura NUMBER,
Id_servicio NUMBER,
Id_historialCarro NUMBER,
Total NUMBER NOT NULL,

CONSTRAINT fk_factura FOREIGN KEY (Id_factura) REFERENCES Factura(Id_factura),
CONSTRAINT fk_servicio FOREIGN KEY (Id_servicio) REFERENCES Servicio(Id_servicio),
CONSTRAINT fk_historialcarro FOREIGN KEY (Id_HistorialCarro) REFERENCES HistorialCarro(Id_historialCarro)
);


Create table DetalleProducto(
Id_DetalleProducto NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
Id_factura NUMBER,
Id_producto NUMBER,
Id_HistorialCarro NUMBER,
Cantidad NUMBER NOT NULL,
Total NUMBER NOT NULL,

CONSTRAINT fk_factura1 FOREIGN KEY (Id_factura) REFERENCES Factura(Id_factura),
CONSTRAINT fk_producto1 FOREIGN KEY (Id_producto) REFERENCES Producto(Id_producto),
CONSTRAINT fk_historialcarro1 FOREIGN KEY (Id_HistorialCarro) REFERENCES HistorialCarro(Id_historialCarro)
);  










